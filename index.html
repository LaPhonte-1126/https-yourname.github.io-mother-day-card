<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ch√∫c M·∫π 20-10 üíñ</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    background: radial-gradient(circle at center, #ffe6f0 0%, #ffd6e8 40%, #ffcce0 70%, #ffe6f0 100%);
    font-family: 'Comic Sans MS', cursive, sans-serif;
    color: #c2185b;
    text-align: center;
  }

  h1 {
    margin-top: 20vh;
    font-size: 3em;
    animation: glow 3s infinite alternate;
  }

  @keyframes glow {
    from { text-shadow: 0 0 10px #fff, 0 0 20px #ff80ab, 0 0 30px #ff4081; }
    to { text-shadow: 0 0 20px #fff, 0 0 40px #f06292, 0 0 60px #ec407a; }
  }

  canvas {
    position: absolute;
    top: 0;
    left: 0;
  }

  .heart {
    color: #e91e63;
    font-size: 5em;
    margin-top: 20px;
    animation: beat 1s infinite alternate;
  }

  @keyframes beat {
    from { transform: scale(1); }
    to { transform: scale(1.2); }
  }
</style>
</head>
<body>
  <h1>üíñ Ch√∫c M·∫π 20-10 vui v·∫ª, h·∫°nh ph√∫c v√† m√£i xinh ƒë·∫πp üíñ</h1>
  <div class="heart">‚ù§</div>
  <canvas id="fireworks"></canvas>

  <!-- üéµ Nh·∫°c n·ªÅn c√≥ hi·ªáu ·ª©ng fade-in / fade-out -->
  <audio id="bgm" preload="auto" loop>
    <source src="https://cdn.pixabay.com/download/audio/2023/02/28/audio_8c96b9a6c2.mp3?filename=romantic-piano-melody-140929.mp3" type="audio/mpeg">
  </audio>

  <script>
  // --- Hi·ªáu ·ª©ng ph√°o hoa h√¨nh tr√°i tim ---
  const canvas = document.getElementById('fireworks');
  const ctx = canvas.getContext('2d');
  let w, h;
  function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  function heartShape(t) {
    const x = 16 * Math.pow(Math.sin(t), 3);
    const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
    return [x, y];
  }

  class Particle {
    constructor(x, y, color) {
      this.x = x; this.y = y;
      this.color = color;
      this.alpha = 1;
      this.size = Math.random() * 3 + 1;
    }
    draw() {
      ctx.globalAlpha = this.alpha;
      ctx.fillStyle = this.color;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    }
    update() {
      this.alpha -= 0.02;
    }
  }

  let particles = [];

  function createHeartFirework() {
    const cx = Math.random() * w;
    const cy = Math.random() * h * 0.5 + h * 0.2;
    const color = `hsl(${Math.random()*360}, 100%, 70%)`;
    for (let t = 0; t < Math.PI * 2; t += 0.1) {
      const [hx, hy] = heartShape(t);
      const scale = 15 + Math.random()*10;
      const px = cx + hx * scale;
      const py = cy + hy * scale;
      particles.push(new Particle(px, py, color));
    }
  }

  function animate() {
    ctx.fillStyle = 'rgba(255, 230, 240, 0.15)';
    ctx.fillRect(0, 0, w, h);
    particles.forEach((p, i) => {
      p.draw(); p.update();
      if (p.alpha <= 0) particles.splice(i, 1);
    });
    requestAnimationFrame(animate);
  }

  setInterval(createHeartFirework, 800);
  animate();

  // --- Hi·ªáu ·ª©ng nh·∫°c fade-in / fade-out ---
  const bgm = document.getElementById("bgm");
  let fadeInterval;

  function fadeIn(audio, duration=4000){
    audio.volume=0;
    const step=0.02;
    clearInterval(fadeInterval);
    fadeInterval=setInterval(()=>{
      if(audio.volume<1){
        audio.volume=Math.min(1, audio.volume+step);
      } else clearInterval(fadeInterval);
    }, duration*step);
  }

  function fadeOut(audio, duration=3000){
    const step=0.02;
    clearInterval(fadeInterval);
    fadeInterval=setInterval(()=>{
      if(audio.volume>0){
        audio.volume=Math.max(0, audio.volume-step);
      } else{
        clearInterval(fadeInterval);
        audio.pause();
      }
    }, duration*step);
  }

  (async()=>{
    try{
      await bgm.play();
      fadeIn(bgm);
    }catch{
      window.addEventListener("pointerdown",()=>{
        bgm.play().then(()=>fadeIn(bgm));
      },{once:true});
    }
  })();

  window.addEventListener("beforeunload",()=>fadeOut(bgm));
  </script>
</body>
</html>
